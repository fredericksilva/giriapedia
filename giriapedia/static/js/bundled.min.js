!function(){"use strict";function t(t,i,r){t.otherwise("/"),i.tokenGetter=["store",function(t){return t.get("jwt")}],r.interceptors.push("jwtInterceptor")}function i(t,i,r,a){t.$on("$stateChangeStart",function(t,e,o,s,n){e.data&&e.data.requiresLogin&&(!r.get("jwt")||a.isTokenExpired(r.get("jwt")))&&("criarGiria"===e.name&&r.set("estado",o.stateC),t.preventDefault(),i.go("login"))})}function r(t,i){var r={url:"/",templateUrl:"static/js/partials/map.html",controller:"MapperController",controllerAs:"vm"},a={url:"/:state/",templateUrl:"static/js/partials/girias_state.html",controller:"GiriasEstado",controllerAs:"vm"},e={url:"/giria/:stateC/criar/",templateUrl:"static/js/partials/create_giria.html",controller:"GiriasEstado",controllerAs:"vm",data:{requiresLogin:!0}},o={url:"/giria/:stateC/:giria/significados/",templateUrl:"static/js/partials/giria_significados.html",controller:"GiriasEstado",controllerAs:"vm"},s={url:"/auth/login/",templateUrl:"static/js/partials/login.html",controller:"LoginCtrl",controllerAs:"vm"},n={url:"/auth/cadastrar/",templateUrl:"static/js/partials/signin.html",controller:"SignInCtrl",controllerAs:"vm"},c={url:"/auth/logout/",controller:"LogoutCtrl"};t.state("home",r).state("giriasEstado",a).state("criarGiria",e).state("giriaDescription",o).state("login",s).state("signin",n).state("logout",c)}angular.module("GiriaPedia",["ngAnimate","ui.bootstrap","ui.router","toastr","angular-jwt","angular-storage"]).config(t).run(i).config(r),t.$inject=["$urlRouterProvider","jwtInterceptorProvider","$httpProvider"],i.$inject=["$rootScope","$state","store","jwtHelper"],r.$inject=["$stateProvider","toastrConfig"]}(),function(){"use strict";function t(t,i,r,a,e,o,s){function n(){return o.list(f.estadoAtual,function(t){f.girias=t})}function c(){var t={giria:f.giriaAtual,state:f.estadoAtual};return o.find(t,function(t){f.giriaDesc=t})}function u(t){if(null!==f.currentUser){var i={giria:f.giriaAtual,state:f.estadoAtual};return o.upVote(i,{description:t},function(t){t.success===!0&&(f.giriaDesc=t.giria,s.success("Obrigado pelo seu voto!","Giriapédia"),r.go("giriaDescription",{stateC:f.estadoAtual,giria:f.giriaAtual}))})}r.go("login"),s.info("Você já é cadastrado?","Giriapédia")}function l(t){if(null!==f.currentUser){var i={giria:f.giriaAtual,state:f.estadoAtual};return o.downVote(i,{description:t},function(t){t.success===!0&&(f.giriaDesc=t.giria,s.success("Obrigado pelo seu voto!","Giriapédia"),r.go("giriaDescription",{stateC:f.estadoAtual,giria:f.giriaAtual}))})}r.go("login"),s.info("Você já é cadastrado?","Giriapédia")}function d(t){if(null!==f.currentUser){a.open({templateUrl:"static/js/partials/descriptionsModal.html",controller:"ModalDescriptionCtrl",controllerAs:"vm",resolve:{giriaData:function(){return{giria:t.giria,state:f.estadoAtual}}}})}else r.go("login"),s.info("Você já é cadastrado?","Giriapédia")}function g(){o.create(f.createGiria,function(t){if(t.success===!0)s.success("Giria cadastrada com sucesso",null),n(),r.go("giriasEstado",{state:f.estadoAtual}),f.createGiria={state:f.estadoAtual};else{var i="#/giria/"+f.estadoAtual+"/"+f.createGiria.giria+"/significados/",a=["<p>Deseja adicionar um novo significado?</p>","<br />","<a href='"+i+"' class='btn btn-danger btn-sm'>Novo Significado</a>"];s.error(a.join(" "),"Error ao salvar",{allowHtml:!0,closeButton:!0,tapToDismiss:!1,timeOut:5e3}),s.error(t.error,"Error ao salvar")}})}var f=this;f.estadoAtual=i.state||i.stateC,f.giriaAtual=i.giria,f.createGiria={state:f.estadoAtual},f.currentUser=e.get("jwt")||null,f.saveGiria=g,f.openModal=d,f.upVote=u,f.downVote=l,void 0!==f.giriaAtual&&c(),n()}angular.module("GiriaPedia").controller("GiriasEstado",t),t.$inject=["$scope","$stateParams","$state","$modal","store","giriaServer","toastr"]}(),function(){"use strict";function t(t,i,r,a,e){var o=this;o.user={},o.login=function(){i.send(o.user,function(t){t.success===!0?(r.set("jwt",t.token),a.go("giriasEstado",{state:r.get("estado")}),e.success("Seja Bem Vindo","Giriapédia")):(e.error(t.error,"Giriapédia"),a.go("login"))})}}angular.module("GiriaPedia").controller("LoginCtrl",t),t.$inject=["$scope","loginServices","store","$state","toastr"]}(),function(){"use strict";function t(t,i,r,a){null!==a.get("jwt")?(console.log(a.get("jwt")),a.remove("jwt"),r.success("Volte Logo!","Giriapédia"),i.go("home")):(r.success("Entre no Giriapédia!","Giriapédia"),i.go("login"))}angular.module("GiriaPedia").controller("LogoutCtrl",t),t.$inject=["$scope","$state","toastr","store"]}(),function(){"use strict";function t(t,i){var r=this,a=function(){i.list(function(t){r.listEstados=t})};a()}angular.module("GiriaPedia").controller("MapperController",t),t.$inject=["$scope","estados"]}(),function(){"use strict";function t(t,i,r,a,e,o){function s(){i.dismiss("cancel")}function n(){return o.update(c.item,c.newDesc,function(t){t.success===!0&&(s(),a.success("Novo significado adicionado!",c.item.giria),r.go("giriasEstado",{state:c.item.state}))})}var c=this;c.item=e,c.close=s,c.addSignificado=n}angular.module("GiriaPedia").controller("ModalDescriptionCtrl",t),t.$inject=["$scope","$modalInstance","$state","toastr","giriaData","giriaServer"]}(),function(){"use strict";function t(t,i,r,a,e){function o(){i.send(s.newUser,function(t){t.success===!0?(r.success("Usuario cadastrado",null),a.set("jwt",t.token),e.go("giriasEstado",{state:a.get("estado")})):r.error("Error ao criar usuario","Usuario")})}var s=this;s.newUser={},s.createUser=o}angular.module("GiriaPedia").controller("SignInCtrl",t),t.$inject=["$scope","signinServices","toastr","store","$state"]}(),function(){"use strict";function t(){var t={};return t}angular.module("GiriaPedia").directive("createGiria",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"static/js/partials/create_user.html",controller:"SignInCtrl",controllerAs:"vm"};return t}angular.module("GiriaPedia").directive("createUser",t)}(),function(){"use strict";function t(t){return{list:function(i){t({method:"GET",url:"/estados/"}).success(i)}}}angular.module("GiriaPedia").factory("estados",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){return{list:function(i,r){t({method:"GET",url:"/girias/",params:{state:i}}).success(r)},find:function(i,r){t({method:"GET",url:"/girias/"+i.giria+"/"+i.state+"/"}).success(r)},update:function(i,r,a){var e="/girias/"+i.giria+"/"+i.state+"/";t({method:"PUT",url:e,data:r}).success(a)},upVote:function(i,r,a){var e="/girias/"+i.giria+"/"+i.state+"/";t({method:"PUT",url:e+"?upvotes=true",data:r}).success(a)},downVote:function(i,r,a){var e="/girias/"+i.giria+"/"+i.state+"/";t({method:"PUT",url:e+"?downvotes=true",data:r}).success(a)},create:function(i,r){t({method:"POST",url:"/girias/",data:i}).success(r)}}}angular.module("GiriaPedia").factory("giriaServer",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){return{send:function(i,r){t({method:"POST",url:"/login/",data:i}).success(r)}}}angular.module("GiriaPedia").factory("loginServices",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){return{send:function(i,r){t({method:"POST",url:"/signin/",data:i}).success(r)}}}angular.module("GiriaPedia").factory("signinServices",t),t.$inject=["$http"]}();